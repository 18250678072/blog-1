# 使用 CDN 加速你的网站

前端面试过程中有一个万能的面试题: 如何优化你们的网站性能。而其中 CDN 就是其中一条，而在我看来，它是最重要的一条: 配置CDN可以使网站性瞬时得到质的提升，即使静态资源打包体积过大，缓存策略很差。

那什么是 CDN 呢，这道题随着网站性能的回答呼之欲出。

CDN 将网站的内容发布到最接近用户的边缘网络，使用户可以以更低的网络时延接收到网站内容，避免网络拥塞状况，提高用户访问网站的响应速度。

## CDN 原理简述

## 如何查看网站是否上了 CDN

假设你的网站静态资源上了 CDN，那么网络内容被发布到最接近用户的边缘节点。那么当你在北京访问你的网站时，DNS 会解析你的网络内容到北京的 IP 节点，你在上海访问你的网站时，DNS 会解析到上海的 IP。而且为了解决拥塞，还会对网站内容负载均衡到多个 IP 地址。

那么此时就很简单了，直接对域名的 host 进行 DNS 解析。

以下对我的博客 `shanyue.tech` 以及知乎的静态资源所在的域名 `static.zhihu.com` 使用 `dig` 解析

``` bash
$ dig shanyue.tech +short
shanyue.tech.w.kunlungr.com.
183.203.69.14
183.203.69.11
183.203.69.13
183.203.69.15
183.203.69.6
183.203.69.9
183.203.69.12
183.203.69.10

$ dig static.zhihu.com +short
static.zhihu.com.w.alikunlun.com.
183.201.230.244
183.201.230.248
183.201.230.240
183.201.230.242
183.201.230.245
183.201.230.241
183.201.230.246
183.201.230.243
```

从以上命令可以看到知乎以及我的博客都使用了 CDN，并且根据 CNAME 记录可知两者都采用了阿里的 CDN 服务: 对域名 CNAME 到 `*.w.alikunlun.com`。

## 如何更好地利用 CDN

如果你需要更好地利用 CDN 提高网站性能，你不需要了解 CDN 的原理，但你更需要了解 Http Cache。了解了 http 缓存的运作后，才能更好地充分利用缓存来降低网站的时延。

以下是 CDN 的缓存配置策略

![](https://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/0035928751/p67212.png)

1. 源站和CDN(缓存服务器)均可以配置缓存策略
1. 如果CDN没有配置缓存策略，则以源站缓存策略为主

随着大部分网页

## 为你的网站配置 CDN

由于国内大部分网站采用阿里的CDN，这里以CDN为例讲解如何配置 CDN。详细配置可以参考
